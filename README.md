### Название

**Центр расследований ОСИНТ** — десктоп‑приложение на Electron для расследований в соцсетях и мессенджерах (VK, Одноклассники, Telegram, WhatsApp Web, Max, новостные сайты) без «миллиона вкладок» и с локальным хранением доказательств.[1][2]

---

### Цели проекта

- Предоставить одиночному аналитiku единое рабочее место для:

  - ведения дел по пользователям и каналам;
  - анализа соцсетей и локальных новостных сайтов во встроенных вкладках;
  - фиксации артефактов (скриншоты, HTML, текст, URL, время);
  - маркировки материалов по признакам возможных составов преступлений;
  - формирования структурированных отчётов по делам.[3][4][5]

- Все данные хранятся локально, без внешнего сервера и облака:
  - SQLite‑БД;
  - скриншоты и HTML‑дампы в файловой системе.[6][7]

---

### Основные функции

- Создание и ведение дел («кейсов») по людям/каналам.
- Встроенный браузер с вкладками:
  - VK, Одноклассники, Telegram Web, WhatsApp Web, Max (X/Twitter), настраиваемые новостные сайты.[8][9][1]
- Кнопка «Сохранить артефакт»:
  - скрин видимой области;
  - сохранение URL, заголовка, времени;
  - по возможности — HTML и текстовая выдержка.[10][11]
- База артефактов по делам:
  - поиск по тексту, URL, типу площадки, меткам.
- Метки и комментарии:
  - собственные категории («призывы», «экстремизм», «оправдание», «фейки» и т.п.).[12][3]
- Экспорт отчётов по делу (HTML/PDF).

---

### Стек

- Electron (Node.js + Chromium) — кроссплатформенный десктоп (Linux для разработки, Windows как основная целевая платформа).[13][14]
- SQLite (через `better-sqlite3` или аналог) для локальной БД.[15][16]
- HTML/CSS/JS или любой фронтенд‑фреймворк по выбору (React/Vue/Svelte и т.д.).

---

### Архитектура (высокоуровнево)

- **Main‑процесс (Node.js):**
  - создаёт главное окно (`BrowserWindow`);
  - управляет БД (SQLite);
  - управляет файловой системой (сохранение скринов и HTML);
  - реализует IPC‑ендпоинты для рендерера.[17]
- **Preload‑скрипт:**
  - `contextBridge` → безопасный API `window.api.*` для рендерера.[18][19]
- **Renderer (UI):**
  - интерфейс дел и артефактов;
  - панель встроенного браузера (`<webview>`/BrowserView);
  - кнопка «Сохранить артефакт» → вызов `window.api.captureArtifact(...)`.[20][21]

---

### Структура БД (SQLite)

**Файл:** `osint_case_center.db` (в `app.getPath('userData')`).[22][23]

#### Таблица `cases` (дела)

- `id` INTEGER PK AUTOINCREMENT
- `title` TEXT — название дела (например, «Иванов Иван, VK + TG»)
- `description` TEXT
- `status` TEXT — `draft` / `active` / `closed`
- `created_at` INTEGER — Unix timestamp

#### Таблица `subjects` (объекты/подозреваемые)

- `id` INTEGER PK
- `case_id` INTEGER FK → `cases.id`
- `name` TEXT — ФИО/ник
- `vk_url` TEXT NULL
- `ok_url` TEXT NULL
- `tg_url` TEXT NULL
- `max_url` TEXT NULL
- `notes` TEXT

#### Таблица `artifacts` (артефакты)

- `id` INTEGER PK
- `case_id` INTEGER FK → `cases.id`
- `subject_id` INTEGER FK → `subjects.id` NULL
- `source_type` TEXT — `vk` / `ok` / `tg` / `whatsapp` / `max` / `news`
- `url` TEXT
- `title` TEXT
- `captured_at` INTEGER
- `screenshot_path` TEXT — путь к PNG
- `html_path` TEXT NULL
- `text_excerpt` TEXT NULL
- `tags` TEXT — строка с метками (можно позже вынести в отдельную таблицу)

#### Таблица `legal_marks` (правовые метки)

- `id` INTEGER PK
- `artifact_id` INTEGER FK → `artifacts.id`
- `label` TEXT — тип («призывы», «экстремизм», «оправдание», «фейк» и т.д.)[3][12]
- `article_text` TEXT — произвольное поле с описанием соответствующей статьи/нормы
- `comment` TEXT

**Индексы:**

- по `artifacts.case_id`, `artifacts.url`, `artifacts.source_type`;
- по `legal_marks.artifact_id`.

---

### Основной интерфейс

- **Список дел:**

  - таблица с делами (название, статус, кол‑во артефактов);
  - кнопка «Создать дело».

- **Экран дела:**
  - левая колонка: данные дела + объект (`subject`);
  - центральная зона: встроенный браузер с вкладками (VK, OK, TG, WhatsApp Web, Max, новости);[9][1][8]
  - над браузером: кнопка «Сохранить артефакт»;
  - правая колонка: список артефактов по делу, фильтры/поиск, метки.

---

### Поток фиксации артефакта

1. Аналитик выбирает активное дело.
2. Встроенный браузер открывает нужную площадку/страницу.
3. Аналитик нажимает «Сохранить артефакт».
4. Приложение:
   - получает `URL` и заголовок страницы через `webview` API;[24][20]
   - делает скрин видимой области (`capturePage`);[11][10]
   - по возможности забирает HTML и текст;
   - сохраняет файлы на диск;
   - записывает запись в `artifacts`.

---

### Экспорт отчётов

- Генерация HTML‑шаблона на основе данных по делу:
  - общая информация;
  - артефакты (URL, дата, краткое описание, метки);
  - твои комментарии.
- Преобразование HTML в PDF через скрытое окно и `webContents.printToPDF()`.[24]

---

### Безопасность

- `contextIsolation: true`, `nodeIntegration: false` в рендерере.[19][18]
- Все операции с БД и файловой системой происходят только в main‑процессе через IPC.[17]
- Данные хранятся в `userData`; по желанию можно добавить шифрование БД/файлов (см. подходы к защите SQLite в Electron).[25]

---

### Сборка и дистрибуция

- Использовать `electron-builder` или Electron Forge:
  - сборка для Windows (`nsis`/`exe`), Linux‑билды — опционально.[26][27][28]
- Тестирование:
  - проверка работы БД, путей к скринам, сохранения HTML и отчётов на Windows.[29]

---
